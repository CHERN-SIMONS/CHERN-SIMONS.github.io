<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="[TOC] 8. Python文件对象 python内置函数**open()**用于打开文件和创建文件对象 open(name[,mode[,buffsize]]) open方法可以接收三个参数：文件名，模式和缓冲参数  open函数返回的是一个文件对象 mode：指定文件的打开模式 buffsize：定义文件输出huancun  0表示无输出缓存 1表示使用缓存 负数表示使用系统默认设置 正数表">
<meta property="og:type" content="article">
<meta property="og:title" content="Learning Notes">
<meta property="og:url" content="http://yoursite.com/2019/03/31/Python_tutorial_2/index.html">
<meta property="og:site_name" content="Learning Notes">
<meta property="og:description" content="[TOC] 8. Python文件对象 python内置函数**open()**用于打开文件和创建文件对象 open(name[,mode[,buffsize]]) open方法可以接收三个参数：文件名，模式和缓冲参数  open函数返回的是一个文件对象 mode：指定文件的打开模式 buffsize：定义文件输出huancun  0表示无输出缓存 1表示使用缓存 负数表示使用系统默认设置 正数表">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-04-01T11:04:05.806Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Learning Notes">
<meta name="twitter:description" content="[TOC] 8. Python文件对象 python内置函数**open()**用于打开文件和创建文件对象 open(name[,mode[,buffsize]]) open方法可以接收三个参数：文件名，模式和缓冲参数  open函数返回的是一个文件对象 mode：指定文件的打开模式 buffsize：定义文件输出huancun  0表示无输出缓存 1表示使用缓存 负数表示使用系统默认设置 正数表">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/03/31/Python_tutorial_2/">





  <title> | Learning Notes</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Learning Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/31/Python_tutorial_2/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Bing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learning Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline"></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-31T10:19:25+08:00">
                2019-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>[TOC]</p>
<h1>8. Python文件对象</h1>
<p>python内置函数**open()**用于打开文件和创建文件对象</p>
<p><strong>open(name[,mode[,buffsize]])</strong></p>
<p>open方法可以接收三个参数：<strong>文件名，模式和缓冲参数</strong></p>
<ol>
<li>open函数返回的是一个文件对象</li>
<li>mode：指定文件的打开模式</li>
<li>buffsize：定义文件输出huancun
<ol>
<li>0表示无输出缓存</li>
<li>1表示使用缓存</li>
<li>负数表示使用系统默认设置</li>
<li>正数表示使用近似指定文件的缓冲</li>
</ol>
</li>
</ol>
<p>打开模式：</p>
<ol>
<li>
<p>简单模式</p>
<ol>
<li>r : 只读打开，例如 open('/var/log/message.log', 'r')</li>
<li>w : 写入</li>
<li>a : 附加</li>
</ol>
</li>
<li>
<p>在模式后面用&quot;+&quot;表示同时输入、输出操作，如&quot;r+&quot;, &quot;w+&quot;和&quot;a+&quot;</p>
</li>
<li>
<p>在模式后面附加&quot;b+&quot;表示以二进制方式打开，如&quot;rb&quot;, &quot;wb+&quot;</p>
</li>
</ol>
<p>对于file对象的方法为：</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'_CHUNK_SIZE'</span>,<span class="string">'__class__'</span>,</span><br><span class="line"> <span class="string">'__del__'</span>, <span class="string">'__delattr__'</span>,</span><br><span class="line"> <span class="string">'__dict__'</span>, <span class="string">'__dir__'</span>,</span><br><span class="line"> <span class="string">'__doc__'</span>,<span class="string">'__enter__'</span>,</span><br><span class="line"> <span class="string">'__eq__'</span>, <span class="string">'__exit__'</span>,</span><br><span class="line"> <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>,</span><br><span class="line"> <span class="string">'__getattribute__'</span>, <span class="string">'__getstate__'</span>,</span><br><span class="line"> <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>,</span><br><span class="line"> <span class="string">'__init__'</span>, <span class="string">'__init_subclass__'</span>,</span><br><span class="line"> <span class="string">'__iter__'</span>, <span class="string">'__le__'</span>,</span><br><span class="line"> <span class="string">'__lt__'</span>, <span class="string">'__ne__'</span>,</span><br><span class="line"> <span class="string">'__new__'</span>, <span class="string">'__next__'</span>,</span><br><span class="line"> <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>,</span><br><span class="line"> <span class="string">'__repr__'</span>,<span class="string">'__setattr__'</span>,</span><br><span class="line"> <span class="string">'__sizeof__'</span>,</span><br><span class="line"> <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>,</span><br><span class="line"> <span class="string">'_checkClosed'</span>, <span class="string">'_checkReadable'</span>,</span><br><span class="line"> <span class="string">'_checkSeekable'</span>, <span class="string">'_checkWritable'</span>,</span><br><span class="line"> <span class="string">'_finalizing'</span>, <span class="string">'buffer'</span>, <span class="string">'close'</span>,</span><br><span class="line"> <span class="string">'closed'</span>, <span class="string">'detach'</span>,</span><br><span class="line"> <span class="string">'encoding'</span>, <span class="string">'errors'</span>,</span><br><span class="line"> <span class="string">'fileno'</span>, <span class="string">'flush'</span>, <span class="string">'isatty'</span>,</span><br><span class="line"> <span class="string">'line_buffering'</span>, <span class="string">'mode'</span>,</span><br><span class="line"> <span class="string">'name'</span>, <span class="string">'newlines'</span>,</span><br><span class="line"> <span class="string">'read'</span>, <span class="string">'readable'</span>,</span><br><span class="line"> <span class="string">'readline'</span>, <span class="string">'readlines'</span>,</span><br><span class="line"> <span class="string">'seek'</span>, <span class="string">'seekable'</span>,</span><br><span class="line"> <span class="string">'tell'</span>, <span class="string">'truncate'</span>,</span><br><span class="line"> <span class="string">'writable'</span>, <span class="string">'write'</span>, <span class="string">'writelines'</span>]</span><br></pre></td></tr></table></figure></p>
<p>fileno()方法就是计数，从3开始计数</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f1 = open(<span class="string">'/etc/passwd'</span>,<span class="string">'r'</span>)</span><br><span class="line">f1.fileno()</span><br></pre></td></tr></table></figure></p>
<p>readlines() 以列表返回所有行，每行作为一个元素</p>
<p>readline() 以指针的方式读文件，每次只读一行</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f1 = open(<span class="string">'/etc/passwd'</span>,<span class="string">'r'</span>)</span><br><span class="line">f1.readlines()</span><br><span class="line">f1.readline()</span><br></pre></td></tr></table></figure></p>
<p>tell() 方法返回当前指针在文件中的位置，以字节数表示</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f1 = open(<span class="string">'/etc/passwd'</span>,<span class="string">'r'</span>)</span><br><span class="line">f1.readline()</span><br><span class="line">f1.tell()</span><br></pre></td></tr></table></figure></p>
<p>close() 关闭文件</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f1 = open(<span class="string">'/etc/passwd'</span>,<span class="string">'r'</span>)</span><br><span class="line">f1.close()</span><br></pre></td></tr></table></figure></p>
<p>以追加模式打开，指针直接指向最后一个位置，再写入，就会保护文件不会被覆盖</p>
<p>移动指针到指定位置：<strong>file.seek(offset[, whence])</strong>：</p>
<p>whence：默认whence = 0</p>
<ol>
<li>whence = 0 从文件头开始偏移</li>
<li>whence = 1 从当前位置开始偏移</li>
<li>whence = 2 从文件尾部开始偏移</li>
</ol>
<p>offset：偏移量</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f1.seek(<span class="number">2</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<p>read(num) 方法：从当前位置读num个字节的字符串，此时指针向后移动num</p>
<p>__next__()方法：指针跳到下一行</p>
<p>name()方法：文件名</p>
<p>用读写模式打开就能写入内容，用追加模式打开就会创建一个文件</p>
<p>write()方法，就是写入内容</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f1 = open(<span class="string">'/etc/passwd'</span>,<span class="string">'w+'</span>)</span><br><span class="line">f1.write(<span class="string">'Hellow world'</span>)</span><br><span class="line">f1.close()</span><br></pre></td></tr></table></figure></p>
<p>flush方法，刷新缓冲区，将内容保存到磁盘上，防止突然出错，数据丢失</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f1 = open(<span class="string">'/etc/passwd'</span>,<span class="string">'w+'</span>)</span><br><span class="line">f1.write(<span class="string">'Hellow world'</span>)</span><br><span class="line">f1.flush()</span><br><span class="line">f1.close()</span><br></pre></td></tr></table></figure></p>
<p>将一整行列表写入进文件中：**writelines()**方法，将字符串序列当成一行写入</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">f2 = open(<span class="string">'/tmp/test1.txt'</span>,<span class="string">'w+'</span>)</span><br><span class="line">L1 = os.listdir(<span class="string">'/etc'</span>)</span><br><span class="line">f2.writelines(L1)</span><br><span class="line">f2.flush()</span><br><span class="line">f2.close()</span><br></pre></td></tr></table></figure></p>
<p>要写成多行，可以和列表解析联合使用</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">f2 = open(<span class="string">'/tmp/test1.txt'</span>,<span class="string">'w+'</span>)</span><br><span class="line">L1 = os.listdir(<span class="string">'/etc'</span>)</span><br><span class="line">L2 = [i + <span class="string">'\n'</span> <span class="keyword">for</span> i <span class="keyword">in</span> L1] <span class="comment">#或者 L2 = [joint(i,'\n') for i in L1]</span></span><br><span class="line">f2.seek(<span class="number">0</span>,<span class="number">0</span>) <span class="comment">#将指针放到第一个位置</span></span><br><span class="line">f2.writelines(L2)</span><br><span class="line">f2.flush()</span><br><span class="line">f2.close()</span><br></pre></td></tr></table></figure></p>
<h1>9. Python函数的概念</h1>
<p>函数是Python为了代码最大程度地重用和最小化代码冗余而提供的基本程序结构</p>
<p>函数是一种设计工具，它能让程序员将复杂的系统分解为可管理的部件</p>
<p>函数用于将相关功能打包并参数化</p>
<p>在Python中可以创建4种函数：</p>
<ol>
<li>全局函数：可以在模块中定义</li>
<li>局部函数：嵌套于其他函数中</li>
<li>lambda函数：表达式</li>
<li>方法：与特定数据类型关联的函数，并且只能与数据类型关联一起使用</li>
</ol>
<p>Python提供了很多内置函数</p>
<p>语法：</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_Name</span><span class="params">(parameters)</span>:</span></span><br><span class="line">  func_suite</span><br></pre></td></tr></table></figure></p>
<ol>
<li>
<p>def 是一个可执行语句：因此可以出现在任何能够使用语句的地方，甚至可以嵌套于其他语句中，例如if或者while中</p>
</li>
<li>
<p>def创建了一个对象并将其赋值给一个变量名(即函数名)</p>
</li>
<li>
<p>return 用于返回结果对象，其为可选，无return语句的函数自动返回None对象</p>
<ol>
<li>返回多个值时，彼此间用逗号分开，且组合为元祖形式返回一个对象</li>
</ol>
</li>
<li>
<p>def语句运行之后，可以在程序中通过函数后附加括号进行调用</p>
</li>
</ol>
<p>例如</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printName</span><span class="params">()</span>:</span></span><br><span class="line">  	print(<span class="string">"hello"</span>)</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testFunc</span><span class="params">()</span>:</span></span><br><span class="line">  	<span class="keyword">pass</span> 				<span class="comment">#用于测试或占位</span></span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">squareFunc</span><span class="params">(i)</span>:</span></span><br><span class="line">		i**=<span class="number">2</span></span><br><span class="line">		<span class="keyword">return</span> (i)</span><br></pre></td></tr></table></figure></p>
<p>python创建、改变或者查找变量名都是在名称空间中进行</p>
<p>在代码中变量名被赋值的位置决定了其能被访问到的范围</p>
<p>函数定义了本地作用域，而模块定义了全局作用域</p>
<ol>
<li>
<p>每个模块都是一个全局作用域，因此，全局作用域的范围仅限于单个程序文件</p>
</li>
<li>
<p>每次对函数的调用都会创建一个新的本地作用域，赋值的变量除非声名为全局变量（用global声名），否则均为本地变量</p>
</li>
<li>
<p>所有的变量名都可以归纳为本地、全局或内置的(由__builtin__模块提供)</p>
</li>
</ol>
<p>参数传递形式：</p>
<ol>
<li>
<p>位置参数，从左到右</p>
</li>
<li>
<p>关键字参数：按关键名词匹配,类似于&quot;name = value&quot;</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun_name</span><span class="params">(m,n)</span>:</span></span><br><span class="line">  	print(m,n)</span><br><span class="line"></span><br><span class="line">fun_name(m=<span class="number">6</span>,n=<span class="number">3</span>)</span><br><span class="line">fun_name(n=<span class="number">3</span>,m=<span class="number">6</span>) 		<span class="comment">#相同的输出结果</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p><strong>可变参数</strong>：定义函数是使用*开头的参数，可用于收集任意多的位置或者关键字的参数</p>
</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">(*y)</span>:</span></span><br><span class="line">    print(y)</span><br></pre></td></tr></table></figure></p>
<ol start="4">
<li>可变参数解包：调用函数时，使用*开头的参数，可用于将参数集合打散，从而传递参数任意多的基于位置或者关键字的参数。</li>
</ol>
<h2>lambda匿名函数</h2>
<p>lambda运算符：</p>
<ol>
<li>
<p>lambda args: expression</p>
<ol>
<li>args: 以逗号分隔的参数列表</li>
<li>expression: 用到args中各参数的的表达式</li>
</ol>
</li>
<li>
<p>lambda语句定义的代码必须是合法的表达式，不能出现多条件语句（可使用if的三元表达式）和其他非表达式的语句，如for和while等</p>
</li>
<li>
<p>lambda的首要途径是指定短小的回掉函数</p>
</li>
<li>
<p>lambda将返回一个函数而不是将函数的值赋给某一个变量名</p>
</li>
<li>
<p>注意：</p>
<ol>
<li>lambda是一个表达式而非语句</li>
<li>lambda是一个单个表达式，而不是一个代码块</li>
</ol>
</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> x,y: x+y</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> x,y: print(x,y) <span class="comment">#错误形式，不能是语句</span></span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">L1 = [(<span class="keyword">lambda</span> x: x**<span class="number">2</span>),(<span class="keyword">lambda</span> y:y*<span class="number">3</span>)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> L1:</span><br><span class="line">  	print(i(<span class="number">4</span>))												<span class="comment">#L1返回的是一个函数，所以i就是一个函数，最后i(4)才是取值，</span></span><br><span class="line">    																	<span class="comment">#最后得到16和12</span></span><br></pre></td></tr></table></figure></p>
<h2>Python函数式编程</h2>
<p>函数式编程</p>
<ol>
<li>也称之为泛函编程，是一种编程范型</li>
<li>它将电脑运算视为数学上的函数计算，并且避免状态以及可变参数</li>
<li>函数式编程最重要的基础就是lambda演算，而且lambda演算的函数可以接受函数作为输入和输出</li>
<li>python支持有限的函数式编程功能
<ol>
<li>filter(func, seq) :调用一个bool函数func来迭代遍历每个seq中的元素，返回一个使func返回值为true的元素的序列</li>
<li>map(func, sea1[, seq2, ……]) ：将函数func作用于给定序列(s)的每个元素，并且用一个序列来提供返回值，如果func为None，func表现为一个身份函数，返回一个含有每个序列中元素集合的n个元祖的列表</li>
<li>reduce(func, seq [, init])：将二元函数作用于seq序列的元素，每次携带一对(先前的结果以及下一个序列元素)，连续地将现有的结果和下一个值作用在获得的随后的结果上，最后减少我们的序列为一个单一的返回值；如果初始值init给定，第一个比较会是init和第一个序列元素而不是序列的头两个元素。</li>
</ol>
</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">L1 = [<span class="number">2893</span>,<span class="number">23894</span>,<span class="number">374</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">455</span>,<span class="number">3</span>,<span class="number">45</span>,<span class="number">65</span>,<span class="number">2</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(x)</span>:</span></span><br><span class="line">  	<span class="keyword">if</span> x &gt; <span class="number">20</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">filter(f1, L1)</span><br></pre></td></tr></table></figure></p>
<p>![image-20190331170039849](/Users/bingsun/Library/Application Support/typora-user-images/image-20190331170039849.png)</p>
<p><strong>映射器</strong> ： map()将函数调用&quot;映射&quot;到每个序列的对应元素上并返回一个含有所有返回值的列表</p>
<p>带有单个队列的map() :</p>
<p>![image-20190331170912244](/Users/bingsun/Library/Application Support/typora-user-images/image-20190331170912244.png)</p>
<p>带有多个队列的map()：将多个序列的同一个元素整合成一个元祖，最后集合起来变成一个元祖列表</p>
<p>![image-20190331171142463](/Users/bingsun/Library/Application Support/typora-user-images/image-20190331171142463.png)</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">L1 = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">L2 = [<span class="string">'Sunday'</span>,<span class="string">'Monday'</span>,<span class="string">'Tuesday'</span>,<span class="string">'Wednesday'</span>,<span class="string">'Thursday'</span>,<span class="string">'Friday'</span>,<span class="string">'Saturday'</span>]</span><br><span class="line">map(<span class="keyword">None</span>,L1,L2)</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">L1 = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">L2 = [<span class="string">'Sunday'</span>,<span class="string">'Monday'</span>,<span class="string">'Tuesday'</span>,<span class="string">'Wednesday'</span>,<span class="string">'Thursday'</span>,<span class="string">'Friday'</span>,<span class="string">'Saturday'</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(x)</span>:</span></span><br><span class="line">  	<span class="keyword">return</span> x*= <span class="number">2</span></span><br><span class="line">map(f2,L1)</span><br></pre></td></tr></table></figure></p>
<p>reduce() :例子</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">L1 = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f3</span><span class="params">(x,y)</span>:</span></span><br><span class="line">  	<span class="keyword">return</span> x+y</span><br><span class="line"></span><br><span class="line">reduce(f5,L1)</span><br><span class="line">reduce(f5,L1,<span class="number">10</span>)</span><br></pre></td></tr></table></figure></p>
<h2>Python函数闭包及装饰器</h2>
<p>闭合函数调用：</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(x)</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> y**x</span><br><span class="line">  <span class="keyword">return</span> f2</span><br><span class="line">f3 = f1(<span class="number">3</span>) <span class="comment"># 这是一个函数</span></span><br><span class="line">f3(<span class="number">2</span>) <span class="comment">#返回一个值</span></span><br></pre></td></tr></table></figure></p>
<p>Python<strong>闭包</strong>：闭包(lexical closure)解释为函数在嵌套环境中内层函数对外层函数作用域中的变量进行引用，那么即使在外层函数返回后，内层函数依然可以使用外层函数中的变量，这些变量构成了内层函数的环境</p>
<p>能够实现隐藏状态和作用域之间随意切换。例如上面的例子中，任意数的任意次方都能实现，例如</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#棋盘走棋，不断更新当前棋盘状态</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_pos</span><span class="params">(m,n)</span>:</span></span><br><span class="line">  	<span class="function"><span class="keyword">def</span> <span class="title">new_pos</span><span class="params">(x,y)</span>:</span></span><br><span class="line">      	print(<span class="string">"The old position is (%d,%d), and the new position is (%d,%d)"</span> %(m,n,m+x,n+y))</span><br><span class="line">    <span class="keyword">return</span> new_pos</span><br><span class="line"></span><br><span class="line">action = start_Pos(<span class="number">10</span>,<span class="number">10</span>) <span class="comment">#初始位置</span></span><br><span class="line">action(<span class="number">-1</span>,<span class="number">2</span>)							<span class="comment">#走一步棋子</span></span><br></pre></td></tr></table></figure></p>
<p><strong>生成器</strong>：函数中使用yield，会返回一个生成器对象</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen_Num</span><span class="params">(x)</span>:</span></span><br><span class="line">  	<span class="keyword">while</span> y&lt;=x:</span><br><span class="line">      	<span class="keyword">yield</span> y</span><br><span class="line">        y += <span class="number">1</span></span><br><span class="line">g1 = gen_Num(<span class="number">10</span>)</span><br><span class="line">g1.__next__()</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen_Num</span><span class="params">(n)</span>:</span></span><br><span class="line">  	i = <span class="number">1</span></span><br><span class="line">  	<span class="keyword">while</span> i&lt;=n:</span><br><span class="line">      	<span class="keyword">yield</span> i**<span class="number">2</span></span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">g1 = gen_Num(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> g1:			<span class="comment">#生成器是一个可迭代对象，可以通过for循环遍历每一个值</span></span><br><span class="line">  	print(i)</span><br></pre></td></tr></table></figure></p>
<p><strong>装饰器</strong>：</p>
<ol>
<li>装饰器本身是一个函数，用于装饰其他函数</li>
<li>功能：增强被装饰函数的功能</li>
<li>一般<strong>接受一个函数对象作为参数</strong>，以对其进行增强</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dec</span><span class="params">(func)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">()</span>:</span></span><br><span class="line">		print(<span class="string">"Please sat sth"</span>)</span><br><span class="line">    func()</span><br><span class="line">		print(<span class="string">"OK"</span>)</span><br><span class="line">		<span class="keyword">return</span> wrapper</span><br><span class="line"><span class="meta">@dec</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">()</span>:</span></span><br><span class="line">	print(<span class="string">"I am a Mercurier."</span>)</span><br><span class="line">show()</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dec</span><span class="params">(func)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(x)</span>:</span></span><br><span class="line">		print(<span class="string">"Please sat sth"</span>)</span><br><span class="line">    func(x)</span><br><span class="line">		print(<span class="string">"OK"</span>)</span><br><span class="line">		<span class="keyword">return</span> wrapper</span><br><span class="line"><span class="meta">@dec</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(x)</span>:</span></span><br><span class="line">	print(x)</span><br><span class="line">show(<span class="string">"I am a Mercurier."</span>)</span><br></pre></td></tr></table></figure></p>
<p><strong>递归</strong>：函数执行中调用自身</p>
<p>递归需要退出条件，递归前进段和递归返回段，python要求不能超过1000层</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> n&lt;=<span class="number">1</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> n*factorial(n<span class="number">-1</span>)</span><br></pre></td></tr></table></figure></p>
<h2>函数设计规范</h2>
<p><strong>耦合性</strong>：</p>
<ol>
<li>通过参数接受输入，以及通过return产生输出以保证函数的独立性</li>
<li>尽量减少使用全局变量进行函数间通信</li>
<li>不要在函数中修改可变类型的参数</li>
<li>避免直接改变定义在另外一个模块中的变量</li>
</ol>
<p><strong>聚合性</strong>：</p>
<ol>
<li>每个函数都应该有一个单一、统一的目标</li>
<li>每一个函数的功能都应该相对简单</li>
</ol>
<h1>10. Python面向对象的概念</h1>
<h2>面向对象的概念</h2>
<p>程序 = 指令 + 数据</p>
<p><strong>代码可以选择以指令为核心或者以数据为核心进行编程</strong></p>
<p>两种范式：</p>
<pre><code>1. 以指令为核心：围绕&quot;正在发生什么&quot;进行编程
  	1. 面向过程编程：程序具有一系列线性步骤；主体思想是代码作用于数据
</code></pre>
<ol start="2">
<li>以数据为核心：围绕&quot;将影响谁&quot;进行编程
<ol>
<li>面向对象编程（OOP）：围绕数据以及为数据定义严格定义的借口来组织程序，用数据控制对代码的访问</li>
</ol>
</li>
</ol>
<p>所有编程语言的最终目的都是提供一种抽象方法</p>
<ol>
<li>在机器模型（&quot;解空间&quot;或者&quot;方案空间&quot;）与实际解决的问题模型（&quot;问题空间&quot;）之间，程序员必须建立一种联系
<ol>
<li>面向过程：程序 = 算法 + 数据结构</li>
<li>面向对象：将问题空间中的元素以及他们在接空间中的表示物抽象为对象，并允许通过问题来描述问题而不是方案
<ol>
<li>可以把实例想象成一种新型变量，它保存着数据，但可以对自身的数据执行操作</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>类型是由<strong>状态集合</strong>（数据）和转换这些状态的<strong>操作</strong>集合组成</p>
<ol>
<li><strong>类抽象</strong>
<ol>
<li>类：定义了被多个同一类型对象共享的数据和行为（数据和代码）</li>
<li>类的数据和代码：即类的成员
<ol>
<li>数据：成员变量或实例变量</li>
<li>成员方法：简称为方法，是操作数据的代码，用于定义如何使用成员变量；因此一个类的行为和接口是通过方法来定义的</li>
</ol>
</li>
<li>方法和变量：
<ol>
<li>私有：内部使用，外部不可使用</li>
<li>公共：外部可见</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2>面向对象的程序设计方法</h2>
<p>所有的东西都是对象</p>
<p>程序是一大堆对象和组合</p>
<ol>
<li>通过消息传递，各对象知道自己该做什么</li>
<li>消息：即调用请求，它调用的是从属于目标对象的一个方法</li>
</ol>
<p>每个对象都有自己的存储空间，并可容纳其他对象</p>
<ol>
<li>通过封装现有对象，可以制作成新型对象</li>
</ol>
<p>每个对象都属于某一类型</p>
<ol>
<li>类型，也即类</li>
<li>对象是类的实例</li>
<li>类的一个重要的特性就是&quot;能发什么样的消息给它&quot;</li>
</ol>
<p>同一个类的所有对象都能接受同样的消息（消息就是方法）</p>
<p>定义一个类后，可以根据需要实例化出多个对象</p>
<p>如何利用对象完成真正有用的工作？</p>
<ol>
<li>必须有一种办法能向对象发出请求，令其做一些事情</li>
<li>每个对象仅能接受特定的请求
<ol>
<li>能向对象发送的请求由其&quot;接口&quot;进行定义</li>
<li>对象的&quot;类型&quot;或者&quot;类&quot;则规定类它的接口形式</li>
</ol>
</li>
</ol>
<p>总结起来，</p>
<p><strong>类：将同一种具体事物的共同特性抽象出来的表现状态和转换这些状态的操作</strong></p>
<ol>
<li>
<p><strong>数据：</strong></p>
<ol>
<li><strong>变量：就是属性</strong></li>
</ol>
</li>
<li>
<p><strong>方法：</strong></p>
<ol>
<li><strong>函数：操作变量引用的数据的代码</strong></li>
</ol>
</li>
</ol>
<h3>类间关系和面向对象编程的原则</h3>
<p><strong>类之间的关系</strong>：3种</p>
<ol>
<li><strong>依赖</strong>  (uses-a)：一个类的方法操纵另一个类的对象</li>
<li><strong>聚合</strong>  (has-a)：类A的对象包含类B的对象</li>
<li><strong>继承</strong>  (is-a)：描述特殊和一般的关系 (在一个非常抽象的基础上，构造更加具体的类)</li>
</ol>
<p><strong>面向对象编程的原则</strong>：</p>
<ol>
<li>
<p><strong>封装</strong>：</p>
<ol>
<li>隐藏实现方案的细节</li>
<li>将代码及其处理的数据绑定在一起的一种编程机制，用于保证程序和数据不受外部按扰且不会被误用</li>
</ol>
</li>
<li>
<p><strong>继承</strong>(inheritance)：</p>
<ol>
<li>一个对象获得另一个对象属性的过程；用于实现按层分类的概念</li>
<li>一个深度继承的子类继承了类层次中它的每个祖先的所有属性</li>
<li>超类、基类、父类（上一级的类）</li>
<li>子类、派生类  （下一级继承来的类）</li>
</ol>
</li>
</ol>
<p>![image-20190401092458428](/Users/bingsun/Library/Application Support/typora-user-images/image-20190401092458428.png)</p>
<ol start="3">
<li>
<p><strong>多态性</strong>（Polymorphism）: （<strong>对不同数据(属性)使用同一类操作</strong>，例如对字符串相加和数字相加，可以使用同一个方法写法，但是实现机制不同 例如：plus(str1, str2), plus(2,3) ）</p>
<ol>
<li>
<p>允许一个接口被多个通用的类动作使用的特性，具体使用哪一个动作与应用掺合相关</p>
</li>
<li>
<p>&quot;一个接口，多个方法&quot;</p>
<ol>
<li>用于为一组相关的动作设计一个通用接口，以降低程序的复杂性</li>
</ol>
</li>
</ol>
</li>
</ol>
<h1>11. Python中使用类</h1>
<p>类是一种数据结构，可以用于创建实例</p>
<ol>
<li>一般情况下，类封装了<strong>数据</strong>和可用于该数据的<strong>方法</strong></li>
</ol>
<p>Python类是一个可调用对象，即类对象;</p>
<p>例如list 就是type类型，而L1就是list类的实例化之后结果，整体看起来就是type就是节点上的基类，这个节点出来其中一个就是list, 而list实例化就是L1（ 类似于人(type)分成男人、女人(list)，而其中一个人叫做张三(L1) ）</p>
<p>实例初始化：</p>
<ol>
<li>通过调用类来创建实例
<ol>
<li><strong>instance = ClassName(args…)</strong></li>
</ol>
</li>
<li><strong>类在实例化时可以使用__init__和__del__两个特殊方法</strong></li>
</ol>
<h2>Python中创建类</h2>
<p>python中使用class关键字创建类，语法格式如下：</p>
<ol>
<li>
<p>class ClassName(bases):  （#类定义习惯上首字母大写）</p>
<ol>
<li>'class documentation string'</li>
<li>class_suite</li>
</ol>
</li>
<li>
<p><strong>超类是一个或多个用于继承的父类的集合</strong></p>
</li>
<li>
<p>类体可以包含：声名语句、类成员定义、数据属性、方法</p>
</li>
<li>
<p>注意：</p>
<ol>
<li>如果不存在继承关系，ClassName后面的&quot;(bases)&quot;可以不提供</li>
<li>类文档为可选</li>
</ol>
</li>
</ol>
<p>class语句的一般形式，<strong>方法首个参数必须为self</strong></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassName</span><span class="params">(bases)</span>:</span></span><br><span class="line">  data = value							<span class="comment">#定义数据属性</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">method</span><span class="params">(self, ...)</span>:</span>		<span class="comment">#定义方法属性</span></span><br><span class="line">  	self.member = value</span><br></pre></td></tr></table></figure></p>
<p>例如：</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FirstClass</span>:</span>		<span class="comment">#类名</span></span><br><span class="line">  spam = <span class="number">30</span>					<span class="comment">#类数据属性</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">display</span><span class="params">(self)</span>:</span> <span class="comment">#类方法</span></span><br><span class="line">    print(self.spam)</span><br><span class="line">    </span><br><span class="line">x = FirstClass()		<span class="comment">#创建类实例</span></span><br><span class="line">x.display()					<span class="comment">#方法调用</span></span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SecondClass</span><span class="params">()</span>:</span></span><br><span class="line">  data = <span class="string">"hello world"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">setdata</span><span class="params">(self,x)</span>:</span></span><br><span class="line">    self.str1 = x</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">printdata</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> self.str1</span><br><span class="line">    </span><br><span class="line">inst2 = SecondClass()</span><br><span class="line">inst2.data</span><br><span class="line">inst2.setdata(<span class="string">"abcd"</span>)</span><br><span class="line">inst2.printdata()</span><br></pre></td></tr></table></figure></p>
<p>class语句内，任何复制语句都会创建类属性</p>
<p>每个实例对象都会继承类的属性冰获得自己的名称空间</p>
<h2>Python类方法及调用</h2>
<p>实例（对象）通常包含属性</p>
<ol>
<li>
<p>可调用的属性：方法</p>
<ol>
<li>object.method()</li>
</ol>
</li>
<li>
<p>数据属性</p>
</li>
</ol>
<p>在OOP中，实例就像是带有&quot;数据&quot;的记录，而类是处理这些记录的&quot;程序&quot;</p>
<ol>
<li>
<p>通过实例调用的方法相当于调用所属类的方法来处理当前的实例</p>
<ol>
<li>类似instance.method(args…)会被自动转换为  class.method(instance, args….)；如前面的例子，x.display()会被自动转换为FirstClass.display(x)，即调用类的方法来处理实例x</li>
</ol>
</li>
<li>
<p>因此，类中每个方法必须具有参数self参数，它隐含当前实例之意</p>
</li>
<li>
<p>在方法内对self属性做复制运算会产生每个实例自己的属性</p>
</li>
<li>
<p>python规定，没有实例，方法不允许被调用，此即为&quot;绑定&quot;</p>
</li>
</ol>
<p>class语句中的肤质语句会创建类属性，如前面例子中的spam</p>
<p>在类方法中对传给方法的特殊参数self进行赋值会创建实例属性</p>
<p>![image-20190401101206829](/Users/bingsun/Library/Application Support/typora-user-images/image-20190401101206829.png)</p>
<p>Python中，在创建实例时，<strong>Python会自动调用类中的__init__方法，以隐藏地为实例提供属性</strong></p>
<ol>
<li><strong>__init__方法被称为构造器</strong></li>
<li>如果类中没有定义__init__方法，实例创建之初仅是一个简单的名称空间</li>
<li>可以重载</li>
</ol>
<p><strong>对于__varname__(): python解释器会自动调用，例如 a+b 其实就是 a.__add__(b)</strong></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span><span class="params">()</span>:</span></span><br><span class="line">  data = <span class="string">"hello MyClass"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x)</span>:</span></span><br><span class="line">    self.str1 = x</span><br><span class="line"></span><br><span class="line">i1 = MyClass(<span class="string">"Tom"</span>)  <span class="comment">#没有基类参数(bases)的情况下，这个参数直接传递给类定义中的 x</span></span><br><span class="line">i2 = MyClass(<span class="string">'Jerry'</span>) <span class="comment">#重载构造器</span></span><br></pre></td></tr></table></figure></p>
<p><strong>析构器</strong> ：通过**析构函数__del__()**销毁实例化</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">  name = <span class="string">"someone"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,voice = <span class="string">"Hi"</span>)</span>:</span></span><br><span class="line">    self.voice = voice</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span>			<span class="comment">#这里没有定义析构函数，类由编译器自动销毁</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">saysomething</span><span class="params">(self)</span>:</span></span><br><span class="line">    print(self.voice)</span><br><span class="line"></span><br><span class="line">Tom = Animal()</span><br><span class="line">Tom.saysomething(<span class="string">'Hello!'</span>)</span><br><span class="line">Jerry = Animal(<span class="string">'Hello!'</span>)</span><br><span class="line">Jerry.saysomething()</span><br></pre></td></tr></table></figure></p>
<p>可以使用类的__dict__字典属性或者python内置的dir()函数来获取类的属性：</p>
<ol>
<li>
<p>C.__name__ : 类C的名字（字符串）</p>
</li>
<li>
<p>C.__doc__：类C的文档字符串</p>
</li>
<li>
<p>C.__bases__:类C的所有父类构成的元祖</p>
</li>
<li>
<p>C.__dict__ ：类C的属性</p>
</li>
<li>
<p>C.__module__ ：类C定义所在的模块</p>
</li>
<li>
<p>C.__class__ ：实例C对应的类</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span><span class="params">()</span>:</span></span><br><span class="line">  data = <span class="string">"hello MyClass"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x)</span>:</span></span><br><span class="line">    self.str1 = x</span><br><span class="line"></span><br><span class="line">dir(MyClass)</span><br><span class="line">MyClass.__dict__</span><br></pre></td></tr></table></figure></p>
</li>
</ol>
<h2>Python类方法中可用的变量</h2>
<p>方法的可变变量：</p>
<ol>
<li>
<p>实例变量：指定变量名称及实例自身进行引用</p>
<p>​	self.变量名</p>
</li>
<li>
<p>局部变量：方法内部创建的变量，可以直接使用</p>
</li>
<li>
<p>类变量（也称之为静态变量）：通过制定变量名与类名进行引用</p>
<p>​	类名.变量名</p>
</li>
<li>
<p>全局变量：直接使用</p>
</li>
</ol>
<p>![image-20190401103655631](/Users/bingsun/Library/Application Support/typora-user-images/image-20190401103655631.png)</p>
<h2>Python继承</h2>
<p><strong>继承描述了基类的属性如何&quot;遗传&quot;给派生类</strong>：</p>
<ol>
<li>子类可以继承它的基类的任何属性，包活数据属性和方法</li>
<li>一个<strong>未指定基类的类，其默认有一个名为object的基类</strong></li>
<li><strong>python允许有多重继承</strong></li>
</ol>
<p>创建子类：</p>
<ol>
<li>创建子类时，只需要在类名后跟一个或从其中派生的父类</li>
<li>class SubClassName(ParentClass1[, ParentClass2[,…]]):
<ol>
<li>&quot;optional class documentation string&quot;</li>
<li>class_suite</li>
</ol>
</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClassName</span><span class="params">(ParentClass1,ParentClass2,.....)</span>:</span></span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass</span><span class="params">(object)</span>:</span></span><br><span class="line">  <span class="string">'Parent Class'</span></span><br><span class="line">  gender = <span class="string">"Male"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self.who)</span>:</span></span><br><span class="line">    self.name = who</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildClass</span><span class="params">(ParentClass)</span>:</span></span><br><span class="line">  <span class="string">'Child Class'</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">displayInfo</span><span class="params">(self)</span>:</span></span><br><span class="line">    print(self.gender,self.name)</span><br><span class="line"></span><br><span class="line">x = ChildClass(<span class="string">'Tom'</span>)</span><br><span class="line">x.displayInfo()</span><br></pre></td></tr></table></figure></p>
<p><strong>继承和属性搜索</strong>：</p>
<ol>
<li>
<p>Python中几乎所有属性的获取都可以使用&quot;object.attribute&quot;的格式</p>
<ol>
<li>不过，此表达式会在Python中启动爬树搜索———搜索连续的树</li>
</ol>
</li>
<li>
<p>class语句会产生一个类对象，对class的调用会创建实例，实例自动连结至创建了此实例的类</p>
<ol>
<li>类连结至其超类的方式：
<ol>
<li>将超类列在头部的括号内，从左至右的顺序会决定树中的次序</li>
<li>由下至上，从左到右</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>![image-20190401105529291](/Users/bingsun/Library/Application Support/typora-user-images/image-20190401105529291.png)</p>
<p><strong>继承方法专用化</strong>：</p>
<p>继承会现在子类中寻找变量名，然后才查找超类（父类），因此，子类可以对超类的属性重新定义来取代继承来的行为</p>
<ol>
<li>子类可以完全取代从超类继承而来的属性， 例如下面左边的&quot;setInfo(self.who)&quot;就可以覆盖</li>
<li>也可以通过已覆盖的方法回调超类来扩展超类的方法，例如下面右边最后的&quot;ParClass.setInfo(self)&quot;</li>
</ol>
<p>![image-20190401110114488](/Users/bingsun/Library/Application Support/typora-user-images/image-20190401110114488.png)</p>
<h2>类、实例和其他对象的内置函数</h2>
<ol>
<li>
<p><strong>issubclass()</strong></p>
<ol>
<li>
<p>布尔函数，判断一个类是否由另一个类派生，语法：</p>
<p><strong>issubclass(sub,super)</strong></p>
</li>
</ol>
</li>
<li>
<p><strong>isinstance()</strong></p>
<ol>
<li>
<p>布尔函数，判断一个对象是否是给定类的实例，语法：</p>
<p><strong>isinstance(obj1, class_obj2)</strong></p>
</li>
</ol>
</li>
<li>
<p><strong>hasattr()</strong></p>
<ol>
<li>
<p>布尔函数，判断一个对象是否拥有指定的属性，语法：</p>
<p><strong>hasattr(obj, 'attr')</strong></p>
</li>
<li>
<p>同类的函数还有getattr(), setattr(), delattr()</p>
</li>
</ol>
</li>
<li>
<p><strong>super()</strong></p>
<ol>
<li>在字类中找出其父类以便于调用其属性</li>
<li>一般情况下仅能采用非绑定方式调用祖先类方法</li>
<li>而super()可用于传入实例或者类型对象，语法：<strong>super(type[, obj])</strong></li>
</ol>
</li>
</ol>
<h2>算符重载</h2>
<h1>11.Python模块</h1>
<p>模块是一种顶层文件，放在程序最上面</p>
<ol>
<li>
<p>python模块可以将代码量较大的程序分割成多个有组织的、彼此独立但又能互相交互的代码片段，这些自我包含的有组织的代码段就是模块</p>
</li>
<li>
<p>模块在物理形式上表现为以.py结尾的代码文件</p>
<ol>
<li>一个文件被看作一个独立的模块，一个模块也可以被看作是一个文件</li>
<li>模块文件名就是模块的名字加上扩展名.py</li>
<li>每个模块都有自己的名字空间</li>
</ol>
</li>
<li>
<p>python允许&quot;导入(import)&quot;其他模块已实现代码重用，从而也实现了将独立的代码文件组织成更大的程序系统</p>
<ol>
<li>python中，模块也是对象</li>
<li>在一个模块的顶层定义的所有变量都在被导入时成为了被导入模块的属性</li>
</ol>
</li>
</ol>
<h2>Python顶层文件结构</h2>
<p>一个python程序通常包括<strong>一个顶层程序文件</strong>和<strong>其他的模块文件</strong>（0个、1个或者多个）</p>
<ol>
<li>顶层文件：包含了程序的主要控制流程</li>
<li>模块文件：为顶层文件或其他模块提供各种功能性组件（包含类、函数等声名和定义）
<ol>
<li>模块首次导入或者重载时，python会立即执行模块文件的顶层程序代码（不在函数内的代码），而位于函数主体内的代码直到函数被调用后才会执行</li>
</ol>
</li>
</ol>
<p>python自身带有大量模块，如os, platform等等，称之为<strong>标准库模块</strong>。</p>
<p>![image-20190401172640151](/Users/bingsun/Library/Application Support/typora-user-images/image-20190401172640151.png)</p>
<p>模块是被导入的，但模块也可以导入和使用其他模块，这些模块<strong>可以用python或者其他编程语言写成</strong></p>
<p>模块可内含变量、函数以及类来进行其工作，而函数和类可以包含变量和其他元素</p>
<p>在模块中，模块不应该包含太多除去全局变量、函数和类之外的代码，判断、for循环等尽量少写或着不写。</p>
<p>![image-20190401172712184](/Users/bingsun/Library/Application Support/typora-user-images/image-20190401172712184.png)</p>
<h2>导入模块</h2>
<p>在导入模块的时候只能使用模块名，不能加后缀.py或者.C这样的文件名</p>
<p>import语句：</p>
<ol>
<li>
<p>导入指定的整个模块，包括生成一个<strong>以模块名命名的名称空间</strong>，<strong>和另外的模块空间或者当前文件的名称空间不同</strong>，例如标准库中list和dict虽然都有.pop()方法，但是不会混淆</p>
</li>
<li>
<p><strong>import module1[, module2, ……]</strong></p>
<ol>
<li>建议一个import语句只导入 一个模块</li>
</ol>
</li>
<li>
<p><strong>import module as module_alias</strong> （取一个别名，方便书写），例如</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random <span class="keyword">as</span> rand</span><br><span class="line">x.rand()			<span class="comment">#使用方式不能写random了，只能用rand</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>**from module import name1[, name2[, … name_N]]**语句</p>
<ol>
<li>
<p>常用于只导入指定模块的<strong>部分属性</strong>至<strong>当前的名称空间</strong></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice, randiant,random</span><br><span class="line">randint()			<span class="comment">#因为导入到当前名称空间，所以可以直接使用，但也会导致属性覆盖</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>可以导入多个函数或者类，例如上面的例子</p>
</li>
</ol>
</li>
</ol>
<ol>
<li>
<p>import 和 from-import是赋值语句</p>
<ol>
<li>import和from-import是可执行语句，类似于def，因此，他们可以<strong>嵌套在if测试中</strong>，出现于def中等等</li>
<li>python执行到这些语句时，才会对其进行解析，这意味着，所有来自模块的属性仅在import语句执行后才能使用</li>
</ol>
</li>
<li>
<p>import和from-import都是隐性赋值语句</p>
<ol>
<li>import将整个模块对象赋值给一个变量名</li>
<li>from-import将一个或者多个变量名赋值给导入次模块的模块中的同名对象</li>
</ol>
</li>
<li>
<p>模块就是名称空间</p>
<ol>
<li>
<p>模块的名称空间可以通过属性__dict__或者dir(M)获取</p>
<p>模块属性可通过点号( . )运算符获取，格式为M.attr</p>
</li>
<li>
<p>模块是一个独立的作用域（本地变量就是全局变量）</p>
</li>
</ol>
</li>
</ol>
<h2>import工作机制</h2>
<p>import语句导入指定的模块是会执行三个步骤：</p>
<ol>
<li>
<p>找到模块文件</p>
<p>​	在制定的路径下搜索模块文件</p>
</li>
<li>
<p>编译成字节码</p>
<p>​	文件导入时就会编译，因此，顶层文件.pyc字节码文件在内部使用后就会被丢弃，只有被导入的文件才会	留下.pyc文件</p>
</li>
<li>
<p>执行模块的代码来创建其所定义的对象</p>
<p>​	模块文件中的所有语句会依次执行，从头至尾，而此步骤中任何对变量名的赋值运算，都会产生所得到的	模块文件的属性</p>
</li>
<li>
<p>注意</p>
<ol>
<li>后续的导入操作只不过是提取内存中已经加载的模块对象</li>
<li>reload()可用于重新加载模块</li>
</ol>
</li>
</ol>
<p>模块搜索：</p>
<ol>
<li>
<p>python解释器在import模块时，必须先找到对应的模块文件</p>
<ol>
<li>程序的主目录</li>
<li>PYTHONPATH目录（如果设置了此变量）</li>
<li>标准链接库目录</li>
<li>任何 .path 文件的内容（如果存在 .pth文件）</li>
</ol>
</li>
<li>
<p>这四个组件组合起来即为 sys.path 所包含的路径，而python会选择在搜索路径中第一个复合导入文件名的文件</p>
</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path 		<span class="comment">#查看路径</span></span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li>
<p>如果自己写的包，可以通过sys.path加入</p>
</li>
<li>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">'/tmp/python/lib'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mymod</span><br><span class="line">mymod.printInfo()		<span class="comment">#如果自己写的模块名字为mymod.py</span></span><br></pre></td></tr></table></figure></p>
</li>
</ol>
<ol start="4">
<li>
<p>测试是否错误，<strong>在模块里面最后段落写入判断</strong></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">30</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printInfo</span><span class="params">()</span>:</span></span><br><span class="line">  print(x+<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span><span class="params">()</span>:</span></span><br><span class="line">  data = <span class="string">"hello world"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,who)</span>:</span></span><br><span class="line">    self.name = who</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">printSetName</span><span class="params">(self)</span>:</span></span><br><span class="line">    print(self.data,self.name)</span><br><span class="line">	</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:   <span class="comment">#用于测试</span></span><br><span class="line">  printInfo()</span><br><span class="line">  ins1 = MyClass(<span class="string">'Jerry'</span>)</span><br><span class="line">  print(ins1.data)</span><br><span class="line">  print(ins1.name)</span><br></pre></td></tr></table></figure></p>
</li>
</ol>
<h2>Python中的包</h2>
<p>包用于将一组模块归并到一个目录中，此目录即为包，目录名即为包名</p>
<ol>
<li>
<p>包是一个<strong>有层次的文件目录结构</strong>，它定义了一个由模块和子包组成的python应用程序执行环境</p>
</li>
<li>
<p><strong>基于包，python在执行模块导入时可以执行模块的导入路径</strong></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dir1.dir2.mod1</span><br></pre></td></tr></table></figure></p>
<p>![image-20190401180714740](/Users/bingsun/Library/Application Support/typora-user-images/image-20190401180714740.png)</p>
</li>
</ol>
<p>要使用如图所示的package1,则py_pkg_mod<strong>容器</strong>必须要在模块搜索路径中</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> package1.mod1</span><br></pre></td></tr></table></figure></p>
<p>包导入语句的路径内每个目录都必须有__init__.py文件</p>
<p>​	__init__.py可包含python代码，但通常为空，仅用于扮演包初始化的挂钩、替目录产哼模块命名空间以及使用个目录导入时实现 **from ***行为的角色</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> * <span class="comment">#这样会很方便，但可能会打乱名称空间</span></span><br></pre></td></tr></table></figure></p>
<h1>12. 发布Python模块或程序</h1>
<p>python模块、扩展和应用程序可以按一下的集中形式进行打包和发布：</p>
<ol>
<li>
<p>压缩文件（使用distutils）</p>
<p>​	Windows的zip文件和类Unix平台的.tar.gz文件</p>
</li>
<li>
<p>自动捷报或者自动安装可执行文件</p>
<p>​	Windows中的.exe文件</p>
</li>
<li>
<p>自包含的，不要求安装的预备可运行可执行程序</p>
<p>​	Windows的.exe文件、Unix上带有一个小的脚本前缀的ZIP压缩文件、Max上的 .app 文件等</p>
</li>
<li>
<p>平台相关的安装程序</p>
<p>​	Windows上的 .msi文件、Linux上的常见的.rpm、src.rpm和 .deb文件</p>
</li>
<li>
<p>Python eggs</p>
<p>​	较为流行的第三方扩展</p>
</li>
</ol>
<p><strong>distutils</strong>模块能够帮助完成模块或程序的发布</p>
<ol>
<li>发布是指一个文件集合，这些文件联合在一起可使用distutils构建、打包和发布模块</li>
<li>创建好的发布可以用于安装，也可上传到PyPI与他人共享</li>
</ol>
<p><strong>创建发布</strong>：</p>
<ol>
<li>将个代码文件组织到模块容器中</li>
<li>准备好一个README或者README.txt文件</li>
<li>而后在容器中创建setup.py文件</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line">			name					=		<span class="string">"testmod"</span>,</span><br><span class="line">			version				=		<span class="string">"0.0.1"</span>,</span><br><span class="line">			author				=		<span class="string">"Bing"</span>,</span><br><span class="line">			author_email	=		<span class="string">"bingsun@mail.bnu.edu.cn"</span>,</span><br><span class="line">  		py_modules		=		[<span class="string">"testmod"</span>],</span><br><span class="line">  		url						=		<span class="string">"bnu.edu.cn"</span></span><br><span class="line">  		desctription	=		<span class="string">"A simple test module"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>![image-20190401182732781](/Users/bingsun/Library/Application Support/typora-user-images/image-20190401182732781.png)</p>
<p>可用参数：</p>
<ol>
<li>platforms：平台列表</li>
<li>license：许可证</li>
<li>py_modules：各模块名称组成的列表，此些模块可能位于包的根目录下(modname，不用.py后缀)，也可能位于某子包目录中(subpkg1.modname)</li>
<li>packages：各子包名称的列表</li>
</ol>
<p><strong>在要发布的容器目录中执行 &quot; python setup.py sdist &quot;命令</strong></p>
<h1>13. Python中的异常处理</h1>
<h2>异常的概念</h2>
<p>python在运行时错误称作<strong>异常</strong>，存在两种异常</p>
<ol>
<li>语法错误：软件的结构上有错误而导致不能被解释器解释或者不能被编译器编译</li>
<li>逻辑错误：由于不完整或者不合法的输入所致，也可能是逻辑无法生成、计算或者输出结果需要的过程无法执行等</li>
</ol>
<p>python异常是一个对象，表示错误或者意外情况</p>
<p>子啊python检测到一个错误时，将除触发一个异常</p>
<ol>
<li>python可以通过异常传导机制传递一个异常对象，发出一个异常情况出现的信号</li>
<li>程序员也可以在代码中手动触发异常</li>
</ol>
<p>python的异常也可以理解为：程序出现了错误而在正常控制流程以外采取的行为</p>
<ol>
<li>第一阶段：解释器触发异常，此时当前程序流将被中断</li>
<li>第二阶段：异常处理，如忽略非致命性错误、减轻错误带来的影响等</li>
</ol>
<h2>异常的功用</h2>
<p>错误处理</p>
<ol>
<li>python的默认处理：停止程序，打印错误信息</li>
<li>使用<strong>try语句</strong>处理异常并从异常中恢复</li>
</ol>
<p>事件通知：用于发出有效状态信号</p>
<p>特殊情况处理：无法调整代码取处理的情景</p>
<p><strong>终止行为：try/finally 语句可确保执行必须的结束处理机制</strong></p>
<p>非常规控制流程：异常是一种高级跳转(goto)机制</p>
<p>异常通过try语句来检测： 任何在try语块力的代码都会被监测，以检查有无异常发生</p>
<p>try语句主要有两种形式：</p>
<ol>
<li>
<p>try-except：检测和处理异常</p>
<ol>
<li>可以有多个except</li>
<li>支持使用else子句树立没有探测异常的执行的代码</li>
</ol>
</li>
<li>
<p>try-finally：仅检查异常并做一些必要的清理工作</p>
<p>​	仅能有一个finally</p>
</li>
</ol>
<p><strong>try语句的复合形式</strong>：<strong>try-except-finally</strong></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  try_suite</span><br><span class="line"><span class="keyword">except</span> Exception[, reason]:</span><br><span class="line">  except_suite</span><br></pre></td></tr></table></figure></p>
<p>例如</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  f1 = open(<span class="string">'/tmp/a.txt'</span>,<span class="string">'r+'</span>)</span><br><span class="line"><span class="keyword">except</span> IOError, e:</span><br><span class="line">  print(<span class="string">"cannot open file /tmp/a.txt"</span>, e)</span><br></pre></td></tr></table></figure></p>
<p>可以多次出现except，处理多种异常</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  try_suite</span><br><span class="line"><span class="keyword">except</span> Exception[, reason]:</span><br><span class="line">  suite_exception1</span><br><span class="line"><span class="keyword">except</span> (Exception2, Exception3, ... )[, reason]:	<span class="comment">#一次捕获多个异常时要定义为元祖</span></span><br><span class="line">  suite_</span><br><span class="line"><span class="keyword">except</span>:			<span class="comment">#空的except 表示捕获所有一切异常</span></span><br><span class="line">  suite_</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  else_suit</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    d1 = input(<span class="string">"An Integer: "</span>)</span><br><span class="line">    <span class="keyword">if</span> d1 == <span class="string">'quit'</span>:</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    d2 = input(<span class="string">'Another Integer'</span>)  </span><br><span class="line">    <span class="keyword">print</span> (int(d1)/int(d2))</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError, e:</span><br><span class="line">  print(<span class="string">"Not ()"</span>, e)</span><br><span class="line"><span class="keyword">except</span> ValueError:</span><br><span class="line">  print(<span class="string">"No string"</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">  print(<span class="string">"unknown error"</span>)</span><br></pre></td></tr></table></figure></p>
<ol>
<li>except分句个数没有限制，但else只能有一个</li>
<li>没有异常时，else才会执行</li>
<li>没有复合的except分句时，异常会向上传递到程序中的之前进入的try中或者到进程的顶层</li>
</ol>
<p>无论异常是否发生，finally子句都会执行</p>
<p>​		常用于定义必须进行的清理动作，如关闭文件或者断开服务器连接等</p>
<p>finally中的所有代码执行完毕后会继续向上一层引发异常</p>
<p>语法：</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  try_suite</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">  finally_suite</span><br></pre></td></tr></table></figure></p>
<p>例如：</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  f1=open(<span class="string">'/tmp/python/a.txt'</span>,<span class="string">'r+'</span>)</span><br><span class="line">  f1.write(<span class="string">'Hello World'</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">  f1.close()</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/31/Research-Records20190331/" rel="next" title="">
                <i class="fa fa-chevron-left"></i> 
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Bing</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">1.</span> <span class="nav-text">8. Python文件对象</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">2.</span> <span class="nav-text">9. Python函数的概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">2.1.</span> <span class="nav-text">lambda匿名函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">2.2.</span> <span class="nav-text">Python函数式编程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">2.3.</span> <span class="nav-text">Python函数闭包及装饰器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">2.4.</span> <span class="nav-text">函数设计规范</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">3.</span> <span class="nav-text">10. Python面向对象的概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">3.1.</span> <span class="nav-text">面向对象的概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">3.2.</span> <span class="nav-text">面向对象的程序设计方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">3.2.1.</span> <span class="nav-text">类间关系和面向对象编程的原则</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">4.</span> <span class="nav-text">11. Python中使用类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">4.1.</span> <span class="nav-text">Python中创建类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">4.2.</span> <span class="nav-text">Python类方法及调用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">4.3.</span> <span class="nav-text">Python类方法中可用的变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">4.4.</span> <span class="nav-text">Python继承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">4.5.</span> <span class="nav-text">类、实例和其他对象的内置函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">4.6.</span> <span class="nav-text">算符重载</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">5.</span> <span class="nav-text">11.Python模块</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">5.1.</span> <span class="nav-text">Python顶层文件结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">5.2.</span> <span class="nav-text">导入模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">5.3.</span> <span class="nav-text">import工作机制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">5.4.</span> <span class="nav-text">Python中的包</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">6.</span> <span class="nav-text">12. 发布Python模块或程序</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">7.</span> <span class="nav-text">13. Python中的异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">7.1.</span> <span class="nav-text">异常的概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">7.2.</span> <span class="nav-text">异常的功用</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bing</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



  


  




	





  





  












  





  

  

  

  
  

  
  


  

  

</body>
</html>
